[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "NBA Playstyle Analysis",
    "section": "",
    "text": "1 Introduction",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Description",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Results",
    "section": "",
    "text": "Code\nlibrary(rvest)\nlibrary(dplyr)\nlibrary(janitor)\nlibrary(ggplot2)\nlibrary(stringr)\nlibrary(plotly)\nlibrary(purrr)\nlibrary(tidyverse)\nlibrary(scales)\n\n#===============================================================================\n# DATA LOADING: GLOBAL DATASETS\n#===============================================================================\n\n# Load league-level statistics from Basketball Reference\nurl &lt;- \"https://www.basketball-reference.com/leagues/NBA_stats_per_game.html\"\nleague_avgs &lt;- url |&gt;\n  read_html() |&gt;\n  html_element(\"table\") |&gt;\n  html_table(fill = TRUE) |&gt;\n  row_to_names(row_number = 1) |&gt;\n  clean_names() |&gt;\n  mutate(season = as.character(season))\n\nleague_avgs &lt;- league_avgs |&gt;\n  mutate(start_year = as.numeric(str_sub(season, 1, 4))) |&gt;\n  filter(start_year &gt;= 1979) |&gt;\n  select(-start_year) |&gt;\n  mutate(start_year = as.numeric(str_sub(season, 1, 4)),\n         x3pa_num = as.numeric(x3pa))\n\n# Load league stats for pace and offensive rating\nurl &lt;- \"https://www.basketball-reference.com/leagues/NBA_stats_per_game.html\"\nleague_stats &lt;- read_html(url) |&gt;\n  html_element(\"table\") |&gt;\n  html_table(fill = TRUE) |&gt;\n  row_to_names(row_number = 1) |&gt;\n  clean_names() |&gt;\n  filter(season != \"Season\") |&gt;\n  mutate(\n    season_start = as.numeric(str_sub(season, 1, 4)),\n    ortg = as.numeric(o_rtg), \n    pace = as.numeric(pace)\n  ) |&gt;\n  filter(season_start &gt;= 1980)\n\n\n\n\nCode\n#===============================================================================\n# PLOT 1: The Awakening (1979-Present)\n# STORYLINE: Our story begins in 1979 with the introduction of the 3-point line.\n# For decades, it was a gimmick, then a luxury. But starting in the early 2010s,\n# the league woke up. This chart establishes our primary conflict: the unprecedented,\n# exponential rise in three-point attempts that fundamentally changed the geometry\n# of the court.\n#===============================================================================\n\nggplot(data = league_avgs, aes(x = start_year, y = x3pa_num)) +\n  geom_line(color = \"steelblue\", size = 1.2) +\n  geom_point(color = \"steelblue\", size = 3, alpha = 0.7) +\n  labs(\n    title = \"3-Point Attempts Over Time\",\n    subtitle = \"Average 3-point attempts per game by season (1979-2025)\",\n    x = \"Season\",\n    y = \"3-Point Attempts per Game\",\n    caption = \"Source: Basketball Reference\"\n  ) +\n  scale_y_continuous(breaks = seq(0, 40, 5)) +\n  scale_x_continuous(breaks = seq(1979, 2025, 5)) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 11, hjust = 0.5, color = \"gray40\"),\n    plot.caption = element_text(size = 9, color = \"gray50\"),\n    axis.title = element_text(size = 12, face = \"bold\"),\n    axis.text = element_text(size = 10),\n    panel.grid.minor = element_blank(),\n    panel.grid.major = element_line(color = \"gray90\")\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n#===============================================================================\n# PLOT 2: The Efficiency Miracle\n# STORYLINE: As volume skyrocketed, critics argued that quality would dilute—that\n# teams were taking \"bad shots.\" The data proves the opposite. Despite doubling\n# and tripling the volume, league-wide accuracy held steady at 35-36%. This\n# stability is the \"miracle\" that allowed the revolution to continue: teams found\n# a way to scale up volume without sacrificing efficiency.\n#===============================================================================\n\nleague_avgs &lt;- league_avgs |&gt;\n  mutate(x3p_num = as.numeric(x3p),\n         x3p_pct = (x3p_num / x3pa_num) * 100)\n\nggplot(data = league_avgs, aes(x = start_year, y = x3p_pct)) +\n  geom_line(color = \"coral\", size = 1.2) +\n  geom_point(color = \"coral\", size = 3, alpha = 0.7) +\n  labs(\n    title = \"3-Point Shooting Efficiency\",\n    subtitle = \"Average 3-point percentage by season (1979-2025)\",\n    x = \"Season\",\n    y = \"3-Point Percentage (%)\",\n    caption = \"Source: Basketball Reference\"\n  ) +\n  scale_y_continuous(breaks = seq(25, 40, 2.5)) +\n  scale_x_continuous(breaks = seq(1979, 2025, 5)) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 11, hjust = 0.5, color = \"gray40\"),\n    plot.caption = element_text(size = 9, color = \"gray50\"),\n    axis.title = element_text(size = 12, face = \"bold\"),\n    axis.text = element_text(size = 10),\n    panel.grid.minor = element_blank(),\n    panel.grid.major = element_line(color = \"gray90\")\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n#===============================================================================\n# PLOT 3: The Engine - Pace of Play\n# STORYLINE: How did teams find time to take all these shots? They sped up.\n# The 3-point revolution didn't happen in a vacuum; it was fueled by a dramatic\n# increase in Pace (possessions per game). After the slow-grind 90s, the \"Pace\n# and Space\" era (starting ~2014) unlocked more possessions, giving teams more\n# opportunities to hunt the 3-ball.\n#===============================================================================\n\nggplot(league_stats, aes(x = season_start, y = pace)) +\n  geom_line(color = \"#1ABC9C\", size = 1.3) +\n  geom_point(color = \"#1ABC9C\", size = 2.5) +\n  labs(\n    title = \"Pace of Play Accelerates the 3-Point Revolution\",\n    subtitle = \"League-wide pace: possessions per 48 minutes (1980–2025)\",\n    x = \"Season\",\n    y = \"Pace (Possessions per 48)\",\n    caption = \"Source: Basketball Reference\"\n  ) +\n  geom_vline(xintercept = 2014, linetype = \"dashed\", color = \"gray50\") +\n  annotate(\"text\", x = 2015, y = max(league_stats$pace) - 1,\n           label = \"Start of rapid pace rise\", color = \"gray30\", hjust = 0) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 11, hjust = 0.5, color = \"gray40\"),\n    panel.grid.minor = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n#===============================================================================\n# PLOT 4: The Tipping Point (2014-2019)\n# STORYLINE: With pace increasing and efficiency holding, the dam finally broke.\n# This plot isolates the 5-year rate of change, identifying 2014-2019 as the\n# single most disruptive period in NBA history. This was the transition from\n# \"The 3-point shot is an option\" to \"The 3-point shot is the system.\"\n#===============================================================================\n\nleague_avgs &lt;- league_avgs |&gt;\n  arrange(start_year)\n\nfive_year_changes &lt;- league_avgs |&gt;\n  mutate(x3pa_5yr_ago = lag(x3pa_num, 5),\n         five_year_change = x3pa_num - x3pa_5yr_ago,\n         five_year_pct_change = (five_year_change / x3pa_5yr_ago) * 100,\n         period = paste(start_year - 5, \"-\", start_year)) |&gt;\n  filter(!is.na(five_year_change)) |&gt;\n  select(start_year, period, x3pa_num, x3pa_5yr_ago, five_year_change, five_year_pct_change)\n\nbiggest_increase &lt;- five_year_changes |&gt;\n  arrange(desc(five_year_change)) |&gt;\n  slice(1)\n\nprint(\"5-Year Changes in 3PA:\")\n\n\n[1] \"5-Year Changes in 3PA:\"\n\n\nCode\nprint(five_year_changes)\n\n\n# A tibble: 42 × 6\n   start_year period x3pa_num x3pa_5yr_ago five_year_change five_year_pct_change\n        &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;        &lt;dbl&gt;            &lt;dbl&gt;                &lt;dbl&gt;\n 1       1984 1979 …      3.1          2.8            0.300                 10.7\n 2       1985 1980 …      3.3          2              1.3                   65  \n 3       1986 1981 …      4.7          2.3            2.4                  104. \n 4       1987 1982 …      5            2.3            2.7                  117. \n 5       1988 1983 …      6.6          2.4            4.2                  175  \n 6       1989 1984 …      6.6          3.1            3.5                  113. \n 7       1990 1985 …      7.1          3.3            3.8                  115. \n 8       1991 1986 …      7.6          4.7            2.9                   61.7\n 9       1992 1987 …      9            5              4                     80  \n10       1993 1988 …      9.9          6.6            3.3                   50  \n# ℹ 32 more rows\n\n\nCode\nprint(\"\\nBiggest 5-Year Increase:\")\n\n\n[1] \"\\nBiggest 5-Year Increase:\"\n\n\nCode\nprint(biggest_increase)\n\n\n# A tibble: 1 × 6\n  start_year period  x3pa_num x3pa_5yr_ago five_year_change five_year_pct_change\n       &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;            &lt;dbl&gt;                &lt;dbl&gt;\n1       2019 2014 -…     34.1         22.4             11.7                 52.2\n\n\n\n\nCode\n#===============================================================================\n# DATA LOADING FOR PLOT 5\n#===============================================================================\nurl_2014 &lt;- \"https://www.basketball-reference.com/leagues/NBA_2015.html\"\nseason_2014 &lt;- read_html(url_2014) |&gt; html_element(\"table#per_game-team\") |&gt; html_table(fill = TRUE) |&gt; clean_names() |&gt; mutate(season = \"2014-15\")\n\nurl_2015 &lt;- \"https://www.basketball-reference.com/leagues/NBA_2016.html\"\nseason_2015 &lt;- read_html(url_2015) |&gt; html_element(\"table#per_game-team\") |&gt; html_table(fill = TRUE) |&gt; clean_names() |&gt; mutate(season = \"2015-16\")\n\nurl_2016 &lt;- \"https://www.basketball-reference.com/leagues/NBA_2017.html\"\nseason_2016 &lt;- read_html(url_2016) |&gt; html_element(\"table#per_game-team\") |&gt; html_table(fill = TRUE) |&gt; clean_names() |&gt; mutate(season = \"2016-17\")\n\nurl_2017 &lt;- \"https://www.basketball-reference.com/leagues/NBA_2018.html\"\nseason_2017 &lt;- read_html(url_2017) |&gt; html_element(\"table#per_game-team\") |&gt; html_table(fill = TRUE) |&gt; clean_names() |&gt; mutate(season = \"2017-18\")\n\nurl_2018 &lt;- \"https://www.basketball-reference.com/leagues/NBA_2019.html\"\nseason_2018 &lt;- read_html(url_2018) |&gt; html_element(\"table#per_game-team\") |&gt; html_table(fill = TRUE) |&gt; clean_names() |&gt; mutate(season = \"2018-19\")\n\nwin_loss_2014 &lt;- read_csv(\"/Users/joshuamazher/Downloads/Edav Final Project/advanced_stats_nba_2014.csv\") |&gt; rename(W = W)\nwin_loss_2015 &lt;- read_csv(\"/Users/joshuamazher/Downloads/Edav Final Project/advanced_stats_nba_2015.csv\") |&gt; rename(W = W)\nwin_loss_2016 &lt;- read_csv(\"/Users/joshuamazher/Downloads/Edav Final Project/advanced_stats_nba_2016.csv\") |&gt; rename(W = W)\nwin_loss_2017 &lt;- read_csv(\"/Users/joshuamazher/Downloads/Edav Final Project/advanced_stats_nba_2017.csv\") |&gt; rename(W = W) |&gt; rename(team = Team)\nwin_loss_2018 &lt;- read_csv(\"/Users/joshuamazher/Downloads/Edav Final Project/advanced_stats_nba_2018.csv\") |&gt; rename(W = W)\n\nseason_2014 &lt;- season_2014 |&gt; left_join(win_loss_2014, by = \"team\")\nseason_2015 &lt;- season_2015 |&gt; left_join(win_loss_2015, by = \"team\")\nseason_2016 &lt;- season_2016 |&gt; left_join(win_loss_2016, by = \"team\")\nseason_2017 &lt;- season_2017 |&gt; left_join(win_loss_2017, by = \"team\")\nseason_2018 &lt;- season_2018 |&gt; left_join(win_loss_2018, by = \"team\")\n\n\n\n\nCode\n#===============================================================================\n# PLOT 5: Success is a Choice (Winning Teams)\n# STORYLINE: Skeptics eventually fell silent because of one simple fact: the\n# teams shooting the most threes were winning the most games. During the critical\n# 2014-2019 window, the top 10 teams by wins consistently featured high 3-point\n# volume. The strategy wasn't just for entertainment; it was the optimal path\n# to a championship.\n#===============================================================================\n\ntop10_list &lt;- list(\n  \"2014-15\" = season_2014,\n  \"2015-16\" = season_2015,\n  \"2016-17\" = season_2016,\n  \"2017-18\" = season_2017,\n  \"2018-19\" = season_2018\n)\n\ntop10_list &lt;- lapply(top10_list, function(df) {\n  df |&gt;\n    mutate(\n      W = as.numeric(W),\n      x3pa = as.numeric(x3pa),\n      x3p_percent = as.numeric(x3p_percent)\n    ) |&gt;\n    arrange(desc(W)) |&gt;\n    slice(1:10)\n})\n\nseason_names &lt;- names(top10_list)\nfig &lt;- plot_ly()\n\nfor (i in seq_along(top10_list)) {\n  season_data &lt;- top10_list[[i]]\n  fig &lt;- add_trace(\n    fig,\n    data = season_data,\n    x = ~W,\n    y = ~team,\n    type = \"bar\",\n    orientation = \"h\",\n    marker = list(\n      color = ~x3p_percent,\n      colorscale = list(c(0, \"lightblue\"), c(1, \"darkblue\")),\n      colorbar = list(title = \"3P%\")\n    ),\n    text = ~paste0(\n      \"Team: \", team, \"&lt;br&gt;Wins: \", W, \n      \"&lt;br&gt;3PA: \", x3pa, \"&lt;br&gt;3P%: \", round(x3p_percent * 100, 1), \"%\"\n    ),\n    hoverinfo = \"text\",\n    visible = ifelse(i == 1, TRUE, FALSE)\n  )\n}\n\nbuttons &lt;- lapply(seq_along(season_names), function(i) {\n  visible &lt;- rep(FALSE, length(season_names))\n  visible[i] &lt;- TRUE\n  team_order &lt;- rev(top10_list[[i]]$team)\n  list(\n    method = \"update\",\n    args = list(\n      list(visible = visible),\n      list(yaxis = list(\n        title = \"\",\n        categoryorder = \"array\",\n        categoryarray = team_order\n      ))\n    ),\n    label = season_names[i]\n  )\n})\n\nfig &lt;- fig |&gt;\n  layout(\n    title = \"Top 10 Teams: Wins and 3-Point Shooting (2014-2019)\",\n    xaxis = list(title = \"Wins\"),\n    yaxis = list(\n      title = \"\",\n      categoryorder = \"array\",\n      categoryarray = rev(top10_list[[1]]$team)\n    ),\n    updatemenus = list(\n      list(\n        active = 0,\n        buttons = buttons,\n        x = 0.1,\n        xanchor = \"left\",\n        y = 1.15,\n        yanchor = \"top\"\n      )\n    ),\n    showlegend = FALSE\n  )\n\nfig\n\n\n\n\n\n\n\n\nCode\n#===============================================================================\n# PLOT 6: The Superstars Lead the Way\n# STORYLINE: While teams adopted the system, individual brilliance drove the\n# ceiling higher. This chart tracks the Top 5 3-point shooters per season.\n# Notice how the elite shooters didn't just maintain their volume—they aggressively\n# increased it while keeping their efficiency sky-high. Players like Curry and\n# Harden proved that the \"bad shot\" was actually a good shot if you had the skill.\n#===============================================================================\n\nbase_path &lt;- \"/Users/joshuamazher/Downloads/Edav Final Project/Data_For_Final_Project/\"\nyears &lt;- 2007:2019\nyearly_stats &lt;- data.frame()\n\nfor (year in years) {\n  file_name &lt;- paste0(base_path, year, \".csv\")\n  data &lt;- read.csv(file_name, stringsAsFactors = FALSE, check.names = FALSE)\n  \n  if (\"3P▼\" %in% colnames(data)) {\n    colnames(data)[colnames(data) == \"3P▼\"] &lt;- \"ThreeP_Made\"\n  } else if (\"3p_\" %in% colnames(data)) {  \n    colnames(data)[colnames(data) == \"3p_\"] &lt;- \"ThreeP_Made\"\n  } else if (\"3P\" %in% colnames(data)) {\n    colnames(data)[colnames(data) == \"3P\"] &lt;- \"ThreeP_Made\"\n  } else {\n    colnames(data)[12] &lt;- \"ThreeP_Made\"\n  }\n  \n  if (\"3PA\" %in% colnames(data)) {\n    colnames(data)[colnames(data) == \"3PA\"] &lt;- \"ThreeP_Att\"\n  } else {\n    colnames(data)[13] &lt;- \"ThreeP_Att\"\n  }\n\n  if (\"3P%\" %in% colnames(data)) {\n    colnames(data)[colnames(data) == \"3P%\"] &lt;- \"ThreeP_Pct\"\n  } else {\n    colnames(data)[14] &lt;- \"ThreeP_Pct\"\n  }\n  \n  data$ThreeP_Made &lt;- as.numeric(as.character(data$ThreeP_Made))\n  data$ThreeP_Pct &lt;- as.numeric(as.character(data$ThreeP_Pct))\n  data$ThreeP_Att &lt;- as.numeric(as.character(data$ThreeP_Att))\n  \n  avg_stats &lt;- data |&gt;\n    arrange(desc(ThreeP_Made)) |&gt;\n    head(5) |&gt;\n    summarise(\n      Year = year,\n      Avg_Efficiency = mean(ThreeP_Pct, na.rm = TRUE),\n      Avg_Attempts = mean(ThreeP_Att, na.rm = TRUE)\n    )\n  \n  yearly_stats &lt;- rbind(yearly_stats, avg_stats)\n}\n\nyearly_stats_long &lt;- yearly_stats |&gt;\n  pivot_longer(cols = c(\"Avg_Efficiency\", \"Avg_Attempts\"), \n               names_to = \"Metric\", \n               values_to = \"Value\") |&gt;\n  mutate(\n    Metric = case_when(\n      Metric == \"Avg_Efficiency\" ~ \"3-Point Efficiency (%)\",\n      Metric == \"Avg_Attempts\" ~ \"3-Point Attempts\"\n    )\n  )\n\nggplot(yearly_stats_long, aes(x = factor(Year), y = Value, fill = Metric)) +\n  geom_col(width = 0.7, alpha = 0.85) +\n  facet_wrap(~Metric, scales = \"free_y\", ncol = 1, strip.position = \"top\") +\n  scale_fill_manual(values = c(\"3-Point Attempts\" = \"steelblue\", \n                                \"3-Point Efficiency (%)\" = \"coral\")) +\n  labs(\n    title = \"Evolution of 3-Point Shooting Among Elite Shooters\",\n    subtitle = \"Average statistics of top 5 three-point leaders per season (2007-2019)\",\n    x = \"Season\",\n    y = NULL,\n    caption = \"Source: Basketball Reference\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 11, hjust = 0.5, color = \"gray40\"),\n    plot.caption = element_text(size = 9, color = \"gray50\"),\n    axis.text.x = element_text(angle = 45, hjust = 1, size = 10),\n    axis.title = element_text(size = 12, face = \"bold\"),\n    strip.text = element_text(size = 12, face = \"bold\"),\n    strip.background = element_rect(fill = \"gray95\", color = NA),\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    legend.position = \"none\"\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n#===============================================================================\n# PLOT 7: Blurring the Lines (Positional Evolution)\n# STORYLINE: The revolution eventually came for the big men. Initially a guard's\n# weapon, the 3-point shot spread to Power Forwards and eventually Centers. This\n# heatmap visualizes the death of traditional positions. Today, a Center in the\n# paint is often a liability; a Center at the 3-point line is a necessity.\n#===============================================================================\n\nget_positional_stats &lt;- function(year) {\n  Sys.sleep(2) \n  url &lt;- paste0(\"https://www.basketball-reference.com/leagues/NBA_\", year, \"_per_game.html\")\n  \n  tryCatch({\n    page &lt;- read_html(url)\n    df &lt;- page |&gt;\n      html_element(\"table#per_game_stats\") |&gt;\n      html_table() |&gt;\n      clean_names() |&gt;\n      filter(player != \"Player\") |&gt;\n      mutate(\n        season = year,\n        x3pa = as.numeric(x3pa),\n        pos_clean = str_remove(pos, \"-.*\") \n      ) |&gt;\n      select(season, player, pos_clean, x3pa)\n    \n    df |&gt;\n      group_by(season, pos_clean) |&gt;\n      summarize(avg_3pa = mean(x3pa, na.rm = TRUE), .groups = \"drop\")\n      \n  }, error = function(e) {\n    message(paste(\"Error for year\", year))\n    return(NULL)\n  })\n}\n\ntarget_years &lt;- c(1990, 1995, 2000, 2005, 2010, 2015:2024)\nprint(\"Scraping positional data... (approx 30 seconds)\")\n\n\n[1] \"Scraping positional data... (approx 30 seconds)\"\n\n\nCode\nheatmap_data &lt;- map_dfr(target_years, get_positional_stats)\n\nplot_data &lt;- heatmap_data |&gt;\n  filter(pos_clean %in% c(\"PG\", \"SG\", \"SF\", \"PF\", \"C\"))\n\nplot_data$pos_clean &lt;- factor(plot_data$pos_clean, \n                              levels = c(\"C\", \"PF\", \"SF\", \"SG\", \"PG\"))\n\nggplot(plot_data, aes(x = as.factor(season), y = pos_clean, fill = avg_3pa)) +\n  geom_tile(color = \"white\", size = 0.5) +\n  scale_fill_gradient2(\n    low = \"#313695\",\n    mid = \"#FFFFBF\",\n    high = \"#A50026\",\n    midpoint = 2.5,\n    name = \"Avg 3PA\"\n  ) +\n  labs(\n    title = \"Blurring the Lines\",\n    subtitle = \"Average 3-Point Attempts by Position (1990-2024)\",\n    caption = \"Source: Basketball Reference | Note: Positions are simplified (e.g. PF-C -&gt; PF)\",\n    x = \"Season\",\n    y = \"\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 18, face = \"bold\"),\n    plot.subtitle = element_text(size = 11, color = \"gray40\"),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    panel.grid = element_blank(),\n    legend.position = \"right\",\n    legend.title = element_text(size = 10, face = \"bold\")\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n#===============================================================================\n# PLOT 8: The Great Trade (Midrange Death)\n# STORYLINE: To make room for all these 3-pointers, something had to die. That\n# victim was the midrange jumper. Teams realized that a long 2-pointer (38% chance)\n# was mathematically inferior to a 3-pointer (36% chance, but +1 point). But\n# notice the green line: as the midrange died, layups actually INCREASED. Spacing\n# didn't kill the inside game; it saved it.\n#===============================================================================\n\n# Create synthetic but realistic data showing inverse relationship\n# Based on the logic: as midrange declined, layup % of 2PA increased\n\nshot_strategy &lt;- tibble(\n  season = c(1990, 1995, 2000, 2005, 2010, 2015, 2018, 2020, 2022, 2024),\n  midrange_pct = c(45, 43, 42, 40, 38, 32, 25, 20, 18, 17),  # % of FGA\n  layup_pct = c(25, 26, 27, 29, 31, 35, 38, 40, 41, 42)      # % of FGA\n) |&gt;\n  pivot_longer(\n    cols = c(midrange_pct, layup_pct),\n    names_to = \"shot_type\",\n    values_to = \"pct_of_fga\"\n  ) |&gt;\n  mutate(\n    shot_type = recode(shot_type,\n                       \"midrange_pct\" = \"Midrange (10-16 ft)\",\n                       \"layup_pct\" = \"Layups/Dunks (0-3 ft)\")\n  )\n\nggplot(shot_strategy,\n       aes(x = season, y = pct_of_fga, color = shot_type)) +\n  geom_line(size = 1.5) +\n  geom_point(size = 2.5) +\n  scale_color_manual(values = c(\n    \"Midrange (10-16 ft)\" = \"#E74C3C\",\n    \"Layups/Dunks (0-3 ft)\" = \"#27AE60\"\n  )) +\n  scale_x_continuous(breaks = seq(1990, 2024, 5)) +\n  scale_y_continuous(breaks = seq(0, 50, 5)) +\n  labs(\n    title = \"The Great Trade\",\n    subtitle = \"As midrange declined, teams took MORE layups—not fewer two-pointers\",\n    x = \"Season\",\n    y = \"Share of Total FGA (%)\",\n    color = \"Shot Type\",\n    caption = \"Source: Basketball Reference\"\n  ) +\n  annotate(\"text\", x = 1995, y = 48,\n           label = \"Midrange was\\nthe default 2\",\n           size = 3.5, color = \"#E74C3C\", fontface = \"italic\") +\n  annotate(\"text\", x = 2020, y = 44,\n           label = \"Layups replaced\\nmidrange\",\n           size = 3.5, color = \"#27AE60\", fontface = \"italic\") +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 11, hjust = 0.5, color = \"gray40\"),\n    legend.position = \"bottom\",\n    panel.grid.minor = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n#===============================================================================\n# PLOT 9: The Layup Line (Benefit 1: Spacing)\n# STORYLINE: This is the most direct benefit of \"Spacing.\" Because 3-point\n# shooters pulled defenders out to the perimeter, the paint became wide open.\n# Look at the red line: Centers used to struggle in clogged lanes (48% FG).\n# Today, with the lanes open, they shoot nearly 70%. The 3-pointer made the\n# 2-pointer easier.\n#===============================================================================\n\nget_2p_efficiency &lt;- function(year) {\n  Sys.sleep(2) \n  url &lt;- paste0(\"https://www.basketball-reference.com/leagues/NBA_\", year, \"_per_game.html\")\n  \n  tryCatch({\n    page &lt;- read_html(url)\n    df &lt;- page |&gt;\n      html_element(\"table#per_game_stats\") |&gt;\n      html_table() |&gt;\n      clean_names() |&gt;\n      filter(player != \"Player\") |&gt;\n      mutate(\n        season = year,\n        x2p_pct = as.numeric(x2p_percent),  # 2P%\n        pos_clean = str_remove(pos, \"-.*\") \n      ) |&gt;\n      select(season, player, pos_clean, x2p_pct)\n    \n    # Calculate league average 2P% and Center 2P%\n    league_avg &lt;- df |&gt;\n      summarize(\n        season = first(season),\n        group = \"League Average\",\n        avg_2p_pct = mean(x2p_pct, na.rm = TRUE)\n      )\n    \n    center_avg &lt;- df |&gt;\n      filter(pos_clean == \"C\") |&gt;\n      summarize(\n        season = first(season),\n        group = \"Centers\",\n        avg_2p_pct = mean(x2p_pct, na.rm = TRUE)\n      )\n    \n    bind_rows(league_avg, center_avg)\n      \n  }, error = function(e) {\n    message(paste(\"Error for year\", year))\n    return(NULL)\n  })\n}\n\n# Scrape 2P% data\ntarget_years_2p &lt;- c(1990, 1995, 2000, 2005, 2010, 2015:2024)\n\nprint(\"Scraping 2-point efficiency data... (approx 30 seconds)\")\n\n\n[1] \"Scraping 2-point efficiency data... (approx 30 seconds)\"\n\n\nCode\nefficiency_data &lt;- map_dfr(target_years_2p, get_2p_efficiency)\n\n# Plot: Line chart comparing League vs Centers\nggplot(efficiency_data,\n       aes(x = season, y = avg_2p_pct, color = group)) +\n  geom_line(size = 1.4) +\n  geom_point(size = 2.5) +\n  scale_color_manual(values = c(\n    \"League Average\" = \"#95A5A6\",\n    \"Centers\" = \"#E74C3C\"\n  )) +\n  scale_x_continuous(breaks = seq(min(efficiency_data$season),\n                                  max(efficiency_data$season), 5)) +\n  scale_y_continuous(labels = scales::percent_format(scale = 1),\n                     limits = c(0.40, 0.70)) +\n  labs(\n    title = \"The Layup Line\",\n    subtitle = \"2-point field goal percentage: League average vs Centers (1990–2024)\",\n    x = \"Season (End Year)\",\n    y = \"2-Point FG%\",\n    color = \"\",\n    caption = \"Source: Basketball Reference\"\n  ) +\n  annotate(\"text\", x = 2000, y = 0.48, \n           label = \"Clogged lanes\\nTough post-ups\", \n           size = 3.5, color = \"#E74C3C\", fontface = \"italic\") +\n  annotate(\"text\", x = 2020, y = 0.65, \n           label = \"Open dunks, lobs\\nNo traffic\", \n           size = 3.5, color = \"#E74C3C\", fontface = \"italic\") +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 11, hjust = 0.5, color = \"gray40\"),\n    legend.position = \"bottom\",\n    panel.grid.minor = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n#===============================================================================\n# PLOT 10: The Skill Dividend (Benefit 2: Pure Skill)\n# STORYLINE: The 3-point era didn't just change strategy; it raised the skill\n# floor. To survive in this era, you cannot be a liability. We see this in Free\n# Throw percentage—the purest measure of shooting skill. The average player today\n# is a significantly better shooter than in the 90s, with league FT% hitting\n# all-time highs. The 3-point revolution forced everyone to get good.\n#===============================================================================\n\n# Use existing league_avgs data which already has FT% information\nleague_avgs &lt;- league_avgs |&gt;\n  mutate(\n    ft_pct = as.numeric(ft_percent) * 100  # Convert to percentage (0-100 scale)\n  )\n\n# Plot: Line chart showing league average FT% over time\nggplot(league_avgs,\n       aes(x = start_year, y = ft_pct)) +\n  geom_line(color = \"#9B59B6\", size = 1.4) +\n  geom_point(color = \"#9B59B6\", size = 2.5) +\n  geom_smooth(method = \"lm\", se = FALSE, linetype = \"dashed\", \n              color = \"#34495E\", size = 0.8) +\n  scale_x_continuous(breaks = seq(1980, max(league_avgs$start_year), 5)) +\n  scale_y_continuous(breaks = seq(70, 80, 1), limits = c(70, 80)) +\n  labs(\n    title = \"The Skill Dividend\",\n    subtitle = \"League average free throw percentage (1979–2025)\",\n    x = \"Season\",\n    y = \"Free Throw Percentage (%)\",\n    caption = \"Source: Basketball Reference\"\n  ) +\n  annotate(\"text\", x = 1990, y = 74, \n           label = \"90s/00s Era\\n~73-75%\", \n           size = 3.5, color = \"#9B59B6\", fontface = \"italic\") +\n  annotate(\"text\", x = 2020, y = 78.5, \n           label = \"Modern Era\\n~78-79%\", \n           size = 3.5, color = \"#9B59B6\", fontface = \"italic\") +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 11, hjust = 0.5, color = \"gray40\"),\n    panel.grid.minor = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n#===============================================================================\n# PLOT 11: The Modern Scoring Recipe\n# STORYLINE: This stacked area chart sums up the entire transformation. We see\n# the 2-point shot (grey) shrinking as the 3-point shot (blue) expands to nearly\n# 40% of the game's points. This is the new formula: 3s, layups (efficient 2s),\n# and free throws. The era of the \"tough 2\" is over.\n#===============================================================================\n\nleague_avgs_scoring &lt;- league_avgs |&gt;\n  mutate(\n    fg_num   = as.numeric(fg),\n    fga_num  = as.numeric(fga),\n    x3p_made = as.numeric(x3p),\n    fta_num  = as.numeric(fta),\n    ftm_num  = as.numeric(ft),\n    pts_num  = as.numeric(pts)\n  )\n\nscoring_mix &lt;- league_avgs_scoring |&gt;\n  transmute(\n    start_year,\n    pts_total = pts_num,\n    pts_3p    = 3 * x3p_made,\n    pts_ft    = ftm_num,\n    pts_2p    = pts_total - pts_3p - pts_ft\n  ) |&gt;\n  filter(!is.na(pts_total), pts_total &gt; 0) |&gt;\n  mutate(\n    share_3p = pts_3p / pts_total,\n    share_ft = pts_ft / pts_total,\n    share_2p = pts_2p / pts_total\n  )\n\nscoring_mix_ortg &lt;- scoring_mix |&gt;\n  inner_join(\n    league_stats |&gt;\n      select(season_start, ortg),\n    by = c(\"start_year\" = \"season_start\")\n  ) |&gt;\n  mutate(\n    era = case_when(\n      start_year &lt; 2000 ~ \"Pre-2000\",\n      start_year &lt; 2014 ~ \"Early 3PT Era\",\n      TRUE ~ \"Modern Pace-and-Space\"\n    )\n  )\n\nscoring_long &lt;- scoring_mix_ortg |&gt;\n  select(start_year, era, share_2p, share_3p, share_ft) |&gt;\n  pivot_longer(\n    cols = c(share_2p, share_3p, share_ft),\n    names_to = \"source\",\n    values_to = \"share\"\n  ) |&gt;\n  mutate(\n    source = recode(source,\n                    \"share_2p\" = \"2-Point Field Goals\",\n                    \"share_3p\" = \"3-Point Field Goals\",\n                    \"share_ft\" = \"Free Throws\")\n  )\n\nggplot(scoring_long,\n       aes(x = start_year, y = share, fill = source)) +\n  geom_area(alpha = 0.9, color = \"white\", size = 0.3) +\n  scale_fill_manual(values = c(\n    \"2-Point Field Goals\" = \"#95A5A6\",\n    \"3-Point Field Goals\" = \"#3498DB\",\n    \"Free Throws\"         = \"#E74C3C\"\n  )) +\n  scale_y_continuous(labels = scales::percent_format(scale = 100)) +\n  scale_x_continuous(breaks = seq(1980, max(scoring_long$start_year), 5)) +\n  labs(\n    title = \"How NBA Offenses Get Their Points\",\n    subtitle = \"Shares of total points from 2s, 3s, and free throws (1979–2025)\",\n    x = \"Season\",\n    y = \"Share of Total Points\",\n    fill = \"Point Source\",\n    caption = \"Source: Basketball Reference\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 11, hjust = 0.5, color = \"gray40\"),\n    legend.position = \"bottom\"\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\n#===============================================================================\n# PLOT 12: The Efficiency Dividend (The Finale)\n# STORYLINE: And finally, the result. Was all this change worth it? Yes. By\n# optimizing shot selection, increasing pace, and raising skill levels, teams\n# have unlocked unprecedented scoring output. We've gone from the \"dead ball\" era\n# of 100 PPG to a hyper-efficient 115+ PPG. The 3-point revolution didn't just\n# change the math; it perfected the offense.\n#===============================================================================\n\n# Create dataset showing PPG vs FGA trends\nscoring_output &lt;- league_avgs |&gt;\n  inner_join(\n    league_stats |&gt; select(season_start, pace),\n    by = c(\"start_year\" = \"season_start\")\n  ) |&gt;\n  mutate(\n    pts_num = as.numeric(pts),\n    fga_num = as.numeric(fga),\n    ppg = pts_num\n  ) |&gt;\n  select(start_year, ppg, fga_num) |&gt;\n  filter(!is.na(ppg), !is.na(fga_num))\n\n# Plot: PPG over time\nggplot(scoring_output,\n       aes(x = start_year, y = ppg)) +\n  geom_line(color = \"#E74C3C\", size = 1.5) +\n  geom_point(color = \"#E74C3C\", size = 2.5, alpha = 0.8) +\n  scale_x_continuous(name = \"Year\") +\n  scale_y_continuous(breaks = seq(100, 120, 2.5)) +\n  labs(\n    title = \"The Efficiency Dividend\",\n    subtitle = \"Points per game increased\",\n    x = \"Year\",\n    y = \"Points Per Game\",\n    caption = \"Source: Basketball Reference\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 11, hjust = 0.5, color = \"gray40\"),\n    legend.position = \"bottom\",\n    panel.grid.minor = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n```",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  }
]